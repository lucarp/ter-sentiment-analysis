library("ARI")
install.packages("ARI", dependencies = TRUE)
install.packages("ari", dependencies = TRUE)
lambdas <- c("10000.0", "1000.0", "100.0", "10.0", "1.0", "0.1", "0.01", "0.001", "0.0001", "1e-05", "0.0")
lambdas <- rev(lambdas)
cos_nmi <- c()
cos_ari <- c()
for(lambda in lambdas){
#file <- paste("result_wc_nmtf/lambda/cos/wc-nmtf_Z_l", lambda, ".csv", sep = "")
file <- paste("result_wc_nmtf/lambda/p_tra/wc-nmtf_Z_l", lambda, "_p_tra.csv", sep = "")
res_wc_nmtf <- read.csv(file, header = TRUE)
res_wc_nmtf <- t( normalize( t(res_wc_nmtf) ) )
label_res <- apply(res_wc_nmtf, MARGIN = 1, FUN=which.max)
t_nmi <- NMI(label_res, labelK)
t_ari <- ARI(label_res, labelK)
cos_nmi <- c(cos_nmi, t_nmi)
cos_ari <- c(cos_ari, t_ari)
}
for(lambda in lambdas){
#file <- paste("result_wc_nmtf/lambda/cos/wc-nmtf_Z_l", lambda, ".csv", sep = "")
file <- paste("result_wc_nmtf/lambda/p_tra/wc-nmtf_Z_l", lambda, "_p_tra.csv", sep = "")
res_wc_nmtf <- read.csv(file, header = TRUE)
res_wc_nmtf <- t( normalize( t(res_wc_nmtf) ) )
label_res <- apply(res_wc_nmtf, MARGIN = 1, FUN=which.max)
t_nmi <- NMI(label_res, labelK)
t_ari <- ARI(label_res, labelK)
cos_nmi <- c(cos_nmi, t_nmi)
cos_ari <- c(cos_ari, t_ari)
}
temp = c(1:10)
matrix(c, nrow = 5)
matrix(temp, nrow = 5)
t <- Sys.time()
t2 <- Sys.time()
t2 - t
temp <- t2 - t
temp
plot(temp)
?dist
?svg
#setwd("/media/matthieu/Data/Matthieu/##Etude/#M1/S2/TER/ter-sentiment-analysis")
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
library(aricode)
library(R.matlab)
library(skmeans)
library("FactoMineR")
library(NMF)
normalize <- function(x) {x / sqrt(rowSums(x^2))}
normalizeByCol <- function(df) { t( normalize( t(df) ) )}
sent_process <- function(x){ x[1] - x[2] + 1e-12 }
sent_process2 <- function(x){ if(x[1] > x[2]) {
1}
else{ if(x[1] < x[2]){
-1
}else {0}
}
}
# -------------- Dataset loading --------------
#X <- readMat("mat_files/output_30.csv_tf-idf-l2.mat")
#X <- readMat("mat_files/output_not_original_30.csv_bow.mat")
#X <- readMat("mat_files/output_not_original_30.csv_tf-idf.mat")
#X <- readMat("mat_files/output_not_original_30.csv_tf-idf-l2.mat")
#X <- readMat("mat_files/output_not_original_50.csv_tf-idf-l2.mat")
X <- readMat("mat_files/output_not_original_10.csv_tf-idf-l2.mat")
df <- X$X
dim(df)
mat_df <- as.matrix(df)
mat_df <- normalize(mat_df)
dim(mat_df)
label <- read.csv("mat_files/dataset_LABEL.csv", header = FALSE)
k <- 5
labelK <- apply(label, MARGIN = 1, FUN=function(x) max(1, ceiling(x*k))) # true label (1 to k)
label
labelK
write.csv(labelK, "mat_files/dataset_LABEL5.csv")
temp <- read.csv("mat_files/dataset_LABEL5.csv")
dim(temp)
?write.csv
temp <- read.csv("mat_files/dataset_LABEL5.csv", row.names = FALSE, col.names = FALSE)
write.csv(labelK, "mat_files/dataset_LABEL5.csv", row.names = FALSE, col.names = FALSE)
write.csv(labelK, "mat_files/dataset_LABEL5.csv", row.names = FALSE)
res <- read.csv("lda_res_0.csv")
dim(res)
ind <- read.csv("result_linearDA/lda_res_0_ind.csv")
dim(ind)
res <- read.csv("lda_res_0.csv", row.names = 1)
res <- read.csv("result_linearDA/lda_res_0.csv", row.names = 1)
dim(res)
ind <- read.csv("result_linearDA/lda_res_0_ind.csv", row.names = 1)
dim(ind)
labelK
lab <- label[ind]
ind
list(ind)
as.list(ind)
lab <- label[as.list(ind)]
res
ind
labelK
labelK[ind]
ind
unlist(ind)
c(ind)
labelK[c(1:3)]
labelK[c(ind)]
c(1:3)
c(1:1000)
type(c(1:3))
typeof(c(1:3))
typeof(ind)
typeof(as.integer(ind))
as.numeric(ind)
unlist(ind, use.names = FALSE)
typeof(unlist(ind, use.names = FALSE))
# ----------------------------------------
for(i in 0:4){
file <- paste("result_linearDA/lda_res_", k, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
file <- paste("result_linearDA/lda_res_", k, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
NMI(res, lab)
ARI(res, lab)
}
for(i in 0:4){ print(i) }
# ----------------------------------------
for(i in 0:4){
file <- paste("result_linearDA/lda_res_", k, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
file <- paste("result_linearDA/lda_res_", k, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
NMI(res, lab)
ARI(res, lab)
}
# ----------------------------------------
for(i in 0:4){
file <- paste("result_linearDA/lda_res_", k, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
file <- paste("result_linearDA/lda_res_", k, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
print(NMI(res, lab))
print(ARI(res, lab))
}
# ----------------------------------------
for(i in 0:4){
file <- paste("result_linearDA/lda_res_", i, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
file <- paste("result_linearDA/lda_res_", i, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
print(NMI(res, lab))
print(ARI(res, lab))
}
typeof(res)
typeof(labelK)
typeof(lab)
res
res <- unlist(res, use.names = FALSE)
res
typeof(res)
# ----------------------------------------
for(i in 0:4){
file <- paste("result_linearDA/lda_res_", i, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
res <- unlist(res, use.names = FALSE)
file <- paste("result_linearDA/lda_res_", i, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
print(NMI(res, lab))
print(ARI(res, lab))
}
# ----------------------------------------
for(i in 0:4){
print("-------")
print(i)
file <- paste("result_linearDA/lda_res_", i, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
res <- unlist(res, use.names = FALSE)
file <- paste("result_linearDA/lda_res_", i, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
print(NMI(res, lab))
print(ARI(res, lab))
}
# ----------------------------------------
for(i in 0:4){
print(i)
print("-------")
file <- paste("result_linearDA/lda_res_", i, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
res <- unlist(res, use.names = FALSE)
file <- paste("result_linearDA/lda_res_", i, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
print(NMI(res, lab))
print(ARI(res, lab))
}
dim(res)
length(res)
lengt(lab)
length(lab)
length(ind)
ind
min(ind)
labelK[0]
ind
ind <- ind + c
ind <- ind + 1
ind
# ----------------------------------------
for(i in 0:4){
print(i)
print("-------")
file <- paste("result_linearDA/lda_res_", i, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
res <- unlist(res, use.names = FALSE)
file <- paste("result_linearDA/lda_res_", i, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- ind + 1
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
print(NMI(res, lab))
print(ARI(res, lab))
}
# ----------------------------------------
a_nmi <- 0
a_ari <- 0
for(i in 0:4){
print("-------")
print(i)
print("-------")
file <- paste("result_linearDA/lda_res_", i, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
res <- unlist(res, use.names = FALSE)
file <- paste("result_linearDA/lda_res_", i, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- ind + 1
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
nmi <- NMI(res, lab)
ari <- ARI(res, lab)
print(nmi)
print(ari)
a_nmi <- a_nmi + nmi
a_ari <- a_ari + ari
}
print("-------")
print("mean")
print("-------")
print(nmi)
print(ari)
# ----------------------------------------
a_nmi <- 0
a_ari <- 0
for(i in 0:4){
print("-------")
print(i)
print("-------")
file <- paste("result_linearDA/lda_res_", i, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
res <- unlist(res, use.names = FALSE)
file <- paste("result_linearDA/lda_res_", i, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- ind + 1
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
nmi <- NMI(res, lab)
ari <- ARI(res, lab)
print(nmi)
print(ari)
a_nmi <- a_nmi + nmi
a_ari <- a_ari + ari
}
print("-------")
print("mean")
print("-------")
print(a_nmi)
print(a_ari)
print(a_nmi/5)
print(a_ari/5)
res
min(res)
max(res)
min(lab)
max(lab)
# ----------------------------------------
a_nmi <- 0
a_ari <- 0
for(i in 0:4){
print("-------")
print(i)
print("-------")
file <- paste("result_linearDA/lda_res_", i, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
res <- unlist(res, use.names = FALSE)
file <- paste("result_linearDA/lda_res_", i, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- ind + 1
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
nmi <- NMI(res, lab)
ari <- ARI(res, lab)
print(nmi)
print(ari)
a_nmi <- a_nmi + nmi
a_ari <- a_ari + ari
}
NMI(lab, lab)
library(caret)
library("caret")
install.packages("caret", dependencies = TRUE)
lab
res
confusionMatrix(res, lab)
library(caret)
confusionMatrix(res, lab)
as.factor(res)
as.factor(lab)
dim(res)
length(res)
length(lab)
table(res, lab)
table(lab, res)
confusionMatrix(factor(res), factor(lab))
# ----------------------------------------
a_nmi <- 0
a_ari <- 0
for(i in 0:4){
print("-------")
print(i)
print("-------")
file <- paste("result_linearDA/lda_res_", i, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
res <- unlist(res, use.names = FALSE)
file <- paste("result_linearDA/lda_res_", i, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- ind + 1
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
nmi <- NMI(res, lab)
ari <- ARI(res, lab)
print(nmi)
print(ari)
a_nmi <- a_nmi + nmi
a_ari <- a_ari + ari
}
print("-------")
print("mean")
print("-------")
print(a_nmi/5)
print(a_ari/5)
confusionMatrix(factor(res), factor(lab))
res <- confusionMatrix(factor(res), factor(lab))
res$table
res$table <- res$table + res$table
res$table
0 + res$table
# ----------------------------------------
a_nmi <- 0
a_ari <- 0
conf_mat <- 0
for(i in 0:4){
print("-------")
print(i)
print("-------")
file <- paste("result_linearDA/lda_res_", i, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
res <- unlist(res, use.names = FALSE)
file <- paste("result_linearDA/lda_res_", i, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- ind + 1
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
nmi <- NMI(res, lab)
ari <- ARI(res, lab)
print(nmi)
print(ari)
a_nmi <- a_nmi + nmi
a_ari <- a_ari + ari
conf <- confusionMatrix(factor(res), factor(lab))
conf_mat <- conf_mat + conf$table
}
conf_mat
conf
conf$overall
conf$dots
conf$mode
conf$byClass
t(conf$byClass)
conf$byClass[7]
conf$byClass[7,]
conf$byClass[,7]
# ----------------------------------------
a_nmi <- 0
a_ari <- 0
conf_mat <- 0
f1 <- 0
for(i in 0:4){
print("-------")
print(i)
print("-------")
file <- paste("result_linearDA/lda_res_", i, ".csv", sep = "")
res <- read.csv(file, row.names = 1)
res <- unlist(res, use.names = FALSE)
file <- paste("result_linearDA/lda_res_", i, "_ind.csv", sep = "")
ind <- read.csv(file, row.names = 1)
ind <- ind + 1
ind <- unlist(ind, use.names = FALSE)
lab <- labelK[ind]
nmi <- NMI(res, lab)
ari <- ARI(res, lab)
print(nmi)
print(ari)
a_nmi <- a_nmi + nmi
a_ari <- a_ari + ari
conf <- confusionMatrix(factor(res), factor(lab))
conf_mat <- conf_mat + conf$table
f1 <- f1 + conf$byClass[,7]
}
f1
f1 / 5
conf
conf_mat
plot(conf_mat)
?plot
heatmap(conf_mat)
